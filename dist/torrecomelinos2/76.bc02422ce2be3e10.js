"use strict";(self.webpackChunkTorrecomelinos2=self.webpackChunkTorrecomelinos2||[]).push([[76],{8076:(At,C,d)=>{d.r(C),d.d(C,{ZonaAdminModule:()=>Ct});var u=d(6814),l=d(1896),t=d(5879),f=d(2296);function Z(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToUrl(s.url))}),t._uU(1),t.qZA()}if(2&i){const e=c.$implicit;t.xp6(1),t.Oqu(e.label)}}let k=(()=>{class i{ngOnInit(){this.nombrePublico=sessionStorage.getItem("nombreCompleto")}constructor(e){this.router=e,this.nombrePublico="",this.AdminItems=[{label:"Gesti\xf3n de Zonas",icon:"playlist_add",url:"admin/zonas"},{label:"Gesti\xf3n de Categor\xedas",icon:"playlist_add",url:"admin/categorias"},{label:"Gesti\xf3n de Usuarios",icon:"playlist_add",url:"admin/usuarios"},{label:"Gesti\xf3n de Sugerencias",icon:"playlist_add",url:"admin/sugerencias"},{label:"Registro de Actividad",icon:"playlist_add",url:"admin/registro"}]}goToApp(){this.router.navigate(["/establecimientos"])}goToUrl(e){this.router.navigate([e])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-layout-admin"]],decls:15,vars:2,consts:[[2,"background-color","white","width","100%","height","3%","font-family","monospace","color","black"],[2,"text-align","center"],[2,"height","40%"],[2,"background-color","white","width","50%","height","20%px","margin","auto","margin-top","50px","border-radius","30px"],[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px","color","black"],[2,"width","70%","height","45px","margin","auto","margin-top","10%"],["mat-raised-button","",2,"width","100%","font-family","monospace","border-radius","5px",3,"click"],[2,"width","50%","height","40%","margin","auto","margin-bottom","80px"],[1,"d-grid","gap-2"],["class","btn btn-primary","type","button","style","font-family: monospace;",3,"click",4,"ngFor","ngForOf"],[2,"width","100%","height","100%"],["type","button",1,"btn","btn-primary",2,"font-family","monospace",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"Pablo Rico Mach\xedo"),t.qZA()(),t.TgZ(3,"div",2)(4,"div",3)(5,"h1",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return o.goToApp()}),t._uU(9,"Volver a la aplicaci\xf3n"),t.qZA()()()(),t.TgZ(10,"div",7)(11,"div",8),t.YNc(12,Z,2,1,"button",9),t.qZA()(),t.TgZ(13,"div",10),t._UZ(14,"router-outlet"),t.qZA()),2&n&&(t.xp6(6),t.hij("Bienvenido a la zona de Administrador, ",o.nombrePublico,""),t.xp6(6),t.Q6J("ngForOf",o.AdminItems))},dependencies:[u.sg,l.lC,f.lW]})}return i})();var p=d(5861),m=d(2185),g=d(2539),_=d(617);function x(i,c){1&i&&(t.TgZ(0,"th",7),t._uU(1,"Zonas"),t.qZA())}function y(i,c){1&i&&(t.TgZ(0,"th",7),t._uU(1,"No hay zonas"),t.qZA())}function T(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t._uU(2),t.qZA(),t.TgZ(3,"td",8)(4,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToEditZona(s.id))}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA()(),t.TgZ(7,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToDeleteZona(s.id))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()()}if(2&i){const e=c.$implicit,n=t.oxw();t.xp6(2),t.hij(" ",n.capitalizarPalabra(e.nombre)," ")}}let v=(()=>{class i{constructor(e,n,o){this.router=e,this.establecimientosApi=n,this.authApi=o,this.tokenApi="",this.listadoZonas=[]}ngOnInit(){var e=this;return(0,p.Z)(function*(){try{e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.obtenerZonas()}catch(n){console.error("Error en ngOnInit:",n)}})()}ngOnDestroy(){this.zonasSubscription&&this.zonasSubscription.unsubscribe()}obtenerZonas(){var e=this;return(0,p.Z)(function*(){try{const n=yield e.establecimientosApi.getZonasApi(e.tokenApi).toPromise();e.listadoZonas=n,e.zonasSubscription=e.establecimientosApi.zonas$.subscribe(o=>{e.listadoZonas=o})}catch(n){console.error("Error al obtener zonas:",n)}})()}goToEditZona(e){this.router.navigate(["admin/zonas/edit",e])}goToDeleteZona(e){this.router.navigate(["admin/zonas/delete",e])}capitalizarPalabra(e){return e.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-zonas"]],decls:13,vars:3,consts:[[2,"text-align","center","font-size","40px","font-family","monospace"],[2,"height","100%","width","100%"],[2,"height","50%","width","50%","margin","auto","margin-bottom","150px"],[2,"width","50%","margin","auto"],[2,"width","100%"],["class","th","colspan","2",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2",1,"th"],[1,"td"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Gesti\xf3n de Zonas"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"div",2),t._UZ(5,"router-outlet"),t.qZA(),t.TgZ(6,"table",3)(7,"thead")(8,"tr",4),t.YNc(9,x,2,0,"th",5),t.YNc(10,y,2,0,"th",5),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,T,10,1,"tr",6),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("ngIf",o.listadoZonas.length>0),t.xp6(1),t.Q6J("ngIf",0==o.listadoZonas.length),t.xp6(2),t.Q6J("ngForOf",o.listadoZonas))},dependencies:[u.sg,u.O5,l.lC,f.RK,_.Hw],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:20px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-family:monospace;height:50px;color:#fff}"]})}return i})();function U(i,c){1&i&&(t.TgZ(0,"th",7),t._uU(1,"Categor\xedas"),t.qZA())}function w(i,c){1&i&&(t.TgZ(0,"th",7),t._uU(1,"No hay categor\xedas"),t.qZA())}function J(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t._uU(2),t.qZA(),t.TgZ(3,"td",8)(4,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToEditZona(s.id))}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA()(),t.TgZ(7,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToDeleteZona(s.id))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()()}if(2&i){const e=c.$implicit,n=t.oxw();t.xp6(2),t.hij(" ",n.capitalizarPalabra(e.nombre)," ")}}let M=(()=>{class i{constructor(e,n,o){this.router=e,this.establecimientosApi=n,this.authApi=o,this.listadoCategorias=[],this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){try{e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.obtenerCategorias()}catch(n){console.error("Error en ngOnInit:",n)}})()}ngOnDestroy(){this.categoriasSubscription&&this.categoriasSubscription.unsubscribe()}obtenerCategorias(){var e=this;return(0,p.Z)(function*(){try{const n=yield e.establecimientosApi.getCategoriasApi(e.tokenApi).toPromise();e.listadoCategorias=n,e.categoriasSubscription=e.establecimientosApi.categorias$.subscribe(o=>{e.listadoCategorias=o})}catch(n){console.error("Error al obtener zonas:",n)}})()}goToEditZona(e){this.router.navigate(["admin/categorias/edit",e])}goToDeleteZona(e){this.router.navigate(["admin/categorias/delete",e])}capitalizarPalabra(e){return e.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-categorias"]],decls:13,vars:3,consts:[[2,"text-align","center","font-size","40px","font-family","monospace"],[2,"height","100%","width","100%"],[2,"height","50%","width","50%","margin","auto","margin-bottom","150px"],[2,"width","50%","margin","auto"],[2,"width","100%"],["class","th","colspan","2",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2",1,"th"],[1,"td"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Gesti\xf3n de Categor\xedas"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"div",2),t._UZ(5,"router-outlet"),t.qZA(),t.TgZ(6,"table",3)(7,"thead")(8,"tr",4),t.YNc(9,U,2,0,"th",5),t.YNc(10,w,2,0,"th",5),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,J,10,1,"tr",6),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("ngIf",o.listadoCategorias.length>0),t.xp6(1),t.Q6J("ngIf",0==o.listadoCategorias.length),t.xp6(2),t.Q6J("ngForOf",o.listadoCategorias))},dependencies:[u.sg,u.O5,l.lC,f.RK,_.Hw],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:20px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-family:monospace;height:50px;color:#fff}"]})}return i})();function S(i,c){1&i&&(t.TgZ(0,"th",10),t._uU(1,"Usuarios"),t.qZA())}function N(i,c){1&i&&(t.TgZ(0,"th",10),t._uU(1,"No hay usuarios"),t.qZA())}function q(i,c){if(1&i&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.email," ")}}function F(i,c){if(1&i&&(t.TgZ(0,"td",16),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.email," ")}}function z(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr"),t.YNc(1,q,2,1,"td",11),t.YNc(2,F,2,1,"td",12),t.TgZ(3,"td",13)(4,"button",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToEditZona(s.id.toString()))}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA()(),t.TgZ(7,"button",14),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToDeleteZona(s.id.toString()))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()()}if(2&i){const e=c.$implicit;t.xp6(1),t.Q6J("ngIf",1==e.idRol),t.xp6(1),t.Q6J("ngIf",2==e.idRol)}}let E=(()=>{class i{constructor(e,n){this.router=e,this.authApi=n,this.listadoUsuarios=[],this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){try{e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.obtenerUsuarios()}catch(n){console.error("Error en ngOnInit:",n)}})()}ngOnDestroy(){this.usuariosSubscription.unsubscribe()}obtenerUsuarios(){var e=this;return(0,p.Z)(function*(){try{const n=yield e.authApi.getUsersApi(e.tokenApi).toPromise();e.listadoUsuarios=n,e.usuariosSubscription=e.authApi.usuarios$.subscribe(o=>{e.listadoUsuarios=o})}catch(n){console.error("Error al obtener zonas:",n)}})()}goToEditZona(e){this.router.navigate(["admin/usuarios/edit",e])}goToDeleteZona(e){this.router.navigate(["admin/usuarios/delete",e])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-usuarios"]],decls:18,vars:3,consts:[[2,"text-align","center","font-size","40px","font-family","monospace"],[2,"height","100%","width","100%"],[2,"height","50%","width","50%","margin","auto","margin-bottom","150px"],[2,"width","27%","margin","auto","text-align","center","margin-bottom","20px"],[2,"background-color","red","border-radius","20px","margin-bottom","10px"],[2,"background-color","blue","border-radius","20px"],[2,"width","50%","margin","auto"],[2,"width","100%"],["class","th","colspan","4",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","4",1,"th"],["class","td","style","color: red;",4,"ngIf"],["class","td","style","color: blue;",4,"ngIf"],[1,"td"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"],[1,"td",2,"color","red"],[1,"td",2,"color","blue"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Gesti\xf3n de Usuarios"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"div",2),t._UZ(5,"router-outlet"),t.qZA(),t.TgZ(6,"div",3)(7,"div",4),t._uU(8,"Administrador"),t.qZA(),t.TgZ(9,"div",5),t._uU(10,"Usuario"),t.qZA()(),t.TgZ(11,"table",6)(12,"thead")(13,"tr",7),t.YNc(14,S,2,0,"th",8),t.YNc(15,N,2,0,"th",8),t.qZA()(),t.TgZ(16,"tbody"),t.YNc(17,z,10,2,"tr",9),t.qZA()()()()),2&n&&(t.xp6(14),t.Q6J("ngIf",o.listadoUsuarios.length>0),t.xp6(1),t.Q6J("ngIf",0==o.listadoUsuarios.length),t.xp6(2),t.Q6J("ngForOf",o.listadoUsuarios))},dependencies:[u.sg,u.O5,l.lC,f.RK,_.Hw],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:20px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;margin-right:30px;font-size:20px;font-family:monospace;height:50px;color:#fff}"]})}return i})();var h=d(4664),b=d(2939),a=d(6223);function Y(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editZonaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let I=(()=>{class i{constructor(e,n,o,s,r){this.router=e,this.activatedRoute=n,this.snackbar=o,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.tokenApi="",this.editingInProgress=!1}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getZonasApi(e.tokenApi).toPromise(),e.zonaSeleccionada||e.activatedRoute.params.pipe((0,h.w)(({id:n})=>e.establecimientosApi.getZonaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/zona/"]);e.zonaSeleccionada=n[0],e.nombre=e.zonaSeleccionada.nombre})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/zona/"])}editZonaApi(){0!==this.nombre.length?this.establecimientosApi.getZonaByNameApi(this.nombre,this.tokenApi).subscribe(e=>{if(null!=e[0])return this.snackbar.open("Esta zona ya existe.","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",void this.router.navigate(["admin/zonas/"]);this.establecimientosApi.updateZonaApi({id:this.zonaSeleccionada.id,nombre:this.nombre},this.tokenApi).subscribe(s=>{this.snackbar.open("Zona actualizada correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},s=>{this.snackbar.open("Ha ocurrido un error al actualizar la zona","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/zonas/"])}):this.snackbar.open("Es obligatorio rellenar el nombre de la zona","Cerrar",{duration:2e3,panelClass:["background"]})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(b.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-zona"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Editar Zona"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return o.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,Y,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return o.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.nombre),t.xp6(2),t.Q6J("ngIf",o.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return i})();function O(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteZona())}),t._uU(1,"Aceptar"),t.qZA()}}let Q=(()=>{class i{constructor(e,n,o,s,r){this.router=e,this.activatedRoute=n,this.snackbar=o,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getZonasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,h.w)(({id:n})=>e.establecimientosApi.getZonaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/zonas"]);e.zonaSeleccionada=n[0],e.nombre=e.zonaSeleccionada.nombre})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/zonas/"])}deleteZona(){this.establecimientosApi.deleteZonaApi(this.zonaSeleccionada.id,this.tokenApi).subscribe(e=>{this.snackbar.open("Zona eliminada correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{this.nombre=""})},e=>{this.snackbar.open("Ha ocurrido un error al eliminar la zona","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{this.nombre=""})}),this.router.navigate(["admin/zonas/"])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(b.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete-zona"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"\xbfEst\xe1s seguro de eliminar la zona?"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return o.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,O,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return o.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.nombre),t.xp6(2),t.Q6J("ngIf",o.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]})}return i})();function D(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addZonaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let R=(()=>{class i{constructor(e,n,o){this.snackbar=e,this.establecimientosApi=n,this.authApi=o,this.nombre="",this.numZonas=0,this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi")})()}cancelar(){this.nombre="",this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]})}addZonaApi(){this.establecimientosApi.getZonaByNameApi(this.nombre,this.tokenApi).subscribe(e=>{if(null!=e[0])return this.snackbar.open("Esta zona ya existe.","Cerrar",{duration:2e3,panelClass:["background"]}),void(this.nombre="");this.establecimientosApi.addZonaApi({id:0,nombre:this.nombre},this.tokenApi).subscribe(s=>{this.snackbar.open("Zona a\xf1adida correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{}),this.nombre=""})})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(b.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-zona"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"A\xf1adir Zona"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return o.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,D,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return o.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.nombre),t.xp6(2),t.Q6J("ngIf",o.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return i})();function H(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addCategoriaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let P=(()=>{class i{constructor(e,n,o){this.snackbar=e,this.establecimientosApi=n,this.authApi=o,this.nombre="",this.numCategorias=0,this.tokenApi=""}ngOnInit(){this.tokenApi=sessionStorage.getItem("tokenApi")}cancelar(){this.nombre="",this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]})}addCategoriaApi(){this.establecimientosApi.getCategoriaByNameApi(this.nombre,this.tokenApi).subscribe(e=>{if(null!=e[0])return this.snackbar.open("Esta categoria ya existe.","Cerrar",{duration:2e3,panelClass:["background"]}),void(this.nombre="");this.establecimientosApi.addCategoriaApi({id:0,nombre:this.nombre},this.tokenApi).subscribe(s=>{this.snackbar.open("Categoria a\xf1adida correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.nombre=""})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(b.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-categoria"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"A\xf1adir Categor\xeda"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return o.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,H,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return o.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.nombre),t.xp6(2),t.Q6J("ngIf",o.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return i})();function G(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editCategoria())}),t._uU(1,"Aceptar"),t.qZA()}}let X=(()=>{class i{constructor(e,n,o,s,r){this.router=e,this.activatedRoute=n,this.snackbar=o,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getCategoriasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,h.w)(({id:n})=>e.establecimientosApi.getCategoriaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/categorias/"]);e.categoriaSeleccionada=n[0],e.nombre=e.categoriaSeleccionada.nombre})})()}capitalizarPalabra(e){return e.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/categorias/"])}editCategoria(){const e=this.capitalizarPalabra(this.nombre);0!==this.nombre.length?this.establecimientosApi.getCategoriaByNameApi(e,this.tokenApi).subscribe(n=>{if(null!=n[0])return this.snackbar.open("Esta categoria ya existe.","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",void this.router.navigate(["admin/categorias/"]);this.establecimientosApi.updateCategoriaApi({id:this.categoriaSeleccionada.id,nombre:this.nombre},this.tokenApi).subscribe(r=>{this.snackbar.open("Categoria actualizada correctamente.","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},r=>{this.snackbar.open("Ha ocurrido un error al actualizar la categoria.","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/categorias/"])}):this.snackbar.open("Es obligatorio rellenar el nombre de la categoria","Cerrar",{duration:2e3,panelClass:["background"]})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(b.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-categoria"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Editar Categor\xeda"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return o.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,G,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return o.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.nombre),t.xp6(2),t.Q6J("ngIf",o.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return i})();function K(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteCategoriaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let j=(()=>{class i{constructor(e,n,o,s,r){this.router=e,this.activatedRoute=n,this.snackbar=o,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getCategoriasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,h.w)(({id:n})=>e.establecimientosApi.getCategoriaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/categorias/"]);e.categoriaSeleccionada=n[0],e.nombre=e.categoriaSeleccionada.nombre})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/categorias/"])}deleteCategoriaApi(){this.establecimientosApi.deleteCategoriaApi(this.categoriaSeleccionada.id,this.tokenApi).subscribe(e=>{this.snackbar.open("Categoria eliminada correctamente.","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},e=>{this.snackbar.open("Ha ocurrido un error al eliminar la categor\xeda.","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/categorias/"])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(b.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete-categoria"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"\xbfEst\xe1s seguro de eliminar la categor\xeda?"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return o.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,K,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return o.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.nombre),t.xp6(2),t.Q6J("ngIf",o.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]})}return i})();var A=d(7874);function B(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.registrarApi())}),t._uU(1,"Aceptar"),t.qZA()}}let $=(()=>{class i{constructor(e,n,o){this.snackbar=e,this.authApi=n,this.router=o,this.nombreCompleto="",this.email="",this.pass="",this.idRol=0,this.tokenApi=""}ngOnInit(){this.tokenApi=sessionStorage.getItem("tokenApi")}calcularHashMD5(e){return A.MD5(e).toString()}cancelar(){this.email="",this.nombreCompleto="",this.pass="",this.idRol=0,this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]})}verificaCampos(){return!(""===this.email||""===this.pass||""===this.nombreCompleto||0===this.idRol)}registrarApi(){this.email.includes("@gmail.com")||this.email.includes("@hotmail.com")?this.nombreCompleto.length<5?this.snackbar.open("El nombre debe tener un m\xednimo de 5 caracteres","Cerrar",{duration:2e3,panelClass:["background"]}):this.pass.length<8?this.snackbar.open("La contrase\xf1a debe tener un m\xednimo de 8 caracteres","Cerrar",{duration:2e3,panelClass:["background"]}):this.authApi.getUserByEmail(this.email).subscribe(e=>{if(null==e[0]){const o={id:0,email:this.email,passwd:this.calcularHashMD5(this.pass),nombreCompleto:this.nombreCompleto,idRol:this.idRol,token:"",verificado:1};this.authApi.addUserApi(o,this.tokenApi).subscribe(s=>{this.snackbar.open("Usuario a\xf1adido correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{}),this.email="",this.pass="",this.nombreCompleto="",this.idRol=0}),this.router.navigate(["admin/usuarios/"])}else this.snackbar.open("El usuario registrado ya existe","Cerrar",{duration:2e3,panelClass:["background"]})}):this.snackbar.open("No has introducido un correo electr\xf3nico v\xe1lido","Cerrar",{duration:2e3,panelClass:["background"]})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(b.ux),t.Y36(g.Q),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-usuario"]],decls:21,vars:5,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto"],["type","email","placeholder","Email*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","margin-top","30px"],["type","text","placeholder","Nombre*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","password","placeholder","Contrase\xf1a*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"width","100%","margin","auto","margin-top","20px"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["id","caterogia","name","idRol",1,"form-control",3,"ngModel","ngModelChange"],["value","0","selected",""],["value","1"],["value","2"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"A\xf1adir Usuario"),t.qZA(),t.TgZ(2,"div",1)(3,"input",2),t.NdJ("ngModelChange",function(r){return o.email=r}),t.qZA()(),t.TgZ(4,"div",3)(5,"input",4),t.NdJ("ngModelChange",function(r){return o.nombreCompleto=r}),t.qZA()(),t.TgZ(6,"div",3)(7,"input",5),t.NdJ("ngModelChange",function(r){return o.pass=r}),t.qZA()(),t.TgZ(8,"div",6)(9,"form",7)(10,"select",8),t.NdJ("ngModelChange",function(r){return o.idRol=r}),t.TgZ(11,"option",9),t._uU(12,"Selecciona un Rol"),t.qZA(),t.TgZ(13,"option",10),t._uU(14,"Administrador"),t.qZA(),t.TgZ(15,"option",11),t._uU(16,"Usuario"),t.qZA()()()(),t.TgZ(17,"div",12),t.YNc(18,B,2,0,"button",13),t.TgZ(19,"button",14),t.NdJ("click",function(){return o.cancelar()}),t._uU(20,"Cancelar"),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("ngModel",o.email),t.xp6(2),t.Q6J("ngModel",o.nombreCompleto),t.xp6(2),t.Q6J("ngModel",o.pass),t.xp6(3),t.Q6J("ngModel",o.idRol),t.xp6(8),t.Q6J("ngIf",1==o.verificaCampos()))},dependencies:[u.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F]})}return i})();function L(i,c){if(1&i&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&i){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.rol)}}function W(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.verificar())}),t._uU(1,"No Verificado"),t.qZA()}}function V(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.noVerificar())}),t._uU(1,"Verificado"),t.qZA()}}function tt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.editUsuarioApi())}),t._uU(1,"Aceptar"),t.qZA()}}let et=(()=>{class i{constructor(e,n,o,s){this.router=e,this.snackbar=n,this.activatedRoute=o,this.authApi=s,this.nombreCompleto="",this.email="",this.pass="",this.idRol=0,this.verificado=0,this.tokenApi="",this.listadoRoles=[]}calcularHashMD5(e){return A.MD5(e).toString()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.router.navigate(["admin/usuarios"])}verificaCampos(){return!(""===this.email||""===this.pass||""===this.nombreCompleto||0===this.idRol)}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.authApi.getUsersApi(e.tokenApi).toPromise();const n=yield e.authApi.getRoles().toPromise();e.listadoRoles=n,e.activatedRoute.params.pipe((0,h.w)(({id:o})=>e.authApi.getUsersApiById(o,e.tokenApi))).subscribe(o=>{if(!o)return e.router.navigate(["/usuarios"]);e.usuarioSeleccionado=o[0],e.email=e.usuarioSeleccionado.email,e.nombreCompleto=e.usuarioSeleccionado.nombreCompleto,e.pass=e.usuarioSeleccionado.passwd,e.idRol=e.usuarioSeleccionado.idRol,e.verificado=e.usuarioSeleccionado.verificado})})()}verificar(){this.verificado=1}noVerificar(){this.verificado=0}editUsuarioApi(){var e=this;return(0,p.Z)(function*(){if(e.nombreCompleto.length<5)return void e.snackbar.open("El nombre debe tener un m\xednimo de 5 caracteres","Cerrar",{duration:2e3,panelClass:["background"]});if(e.pass.length<8)return void e.snackbar.open("La contrase\xf1a debe tener un m\xednimo de 8 caracteres","Cerrar",{duration:2e3,panelClass:["background"]});let o=(yield e.authApi.getUserByEmail(e.email).toPromise())[0];o=e.usuarioSeleccionado.passwd===e.pass?{id:e.usuarioSeleccionado.id,email:e.email,nombreCompleto:e.nombreCompleto,passwd:e.usuarioSeleccionado.passwd,token:e.usuarioSeleccionado.token,idRol:e.idRol,verificado:e.verificado}:{id:e.usuarioSeleccionado.id,email:e.email,idRol:e.idRol,nombreCompleto:e.nombreCompleto,passwd:e.calcularHashMD5(e.pass),token:e.usuarioSeleccionado.token,verificado:e.verificado},e.authApi.updateUserApi(o,e.tokenApi).subscribe(s=>{e.snackbar.open("Usuario actualizado correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},s=>{e.snackbar.open("Ha ocurrido un error al actualizar el usuario","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),e.router.navigate(["admin/usuarios/"])})()}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(b.ux),t.Y36(l.gz),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-edit-usuario"]],decls:19,vars:8,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto"],["type","email","placeholder","Email*","aria-label","Username","aria-describedby","addon-wrapping","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","margin-top","30px"],["type","text","placeholder","Nombre*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","password","placeholder","Contrase\xf1a*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"width","100%","margin","auto","margin-top","20px"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["id","id","name","idRol",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"margin","auto","width","60%","margin-top","20px","font-family","monospace"],["type","button","class","btn btn-outline-danger","style","width: 100%;",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-success","style","width: 100%;",3,"click",4,"ngIf"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],[3,"value"],["type","button",1,"btn","btn-outline-danger",2,"width","100%",3,"click"],["type","button",1,"btn","btn-outline-success",2,"width","100%",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Editar Usuario"),t.qZA(),t.TgZ(2,"div",1)(3,"input",2),t.NdJ("ngModelChange",function(r){return o.email=r}),t.qZA()(),t.TgZ(4,"div",3)(5,"input",4),t.NdJ("ngModelChange",function(r){return o.nombreCompleto=r}),t.qZA()(),t.TgZ(6,"div",3)(7,"input",5),t.NdJ("ngModelChange",function(r){return o.pass=r}),t.qZA()(),t.TgZ(8,"div",6)(9,"form",7)(10,"select",8),t.NdJ("ngModelChange",function(r){return o.idRol=r}),t.YNc(11,L,2,2,"option",9),t.qZA()()(),t.TgZ(12,"div",10),t.YNc(13,W,2,0,"button",11),t.YNc(14,V,2,0,"button",12),t.qZA(),t.TgZ(15,"div",13),t.YNc(16,tt,2,0,"button",14),t.TgZ(17,"button",15),t.NdJ("click",function(){return o.cancelar()}),t._uU(18,"Cancelar"),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("ngModel",o.email),t.xp6(2),t.Q6J("ngModel",o.nombreCompleto),t.xp6(2),t.Q6J("ngModel",o.pass),t.xp6(3),t.Q6J("ngModel",o.idRol),t.xp6(1),t.Q6J("ngForOf",o.listadoRoles),t.xp6(2),t.Q6J("ngIf",0===o.verificado),t.xp6(1),t.Q6J("ngIf",1===o.verificado),t.xp6(2),t.Q6J("ngIf",1==o.verificaCampos()))},dependencies:[u.sg,u.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F]})}return i})(),nt=(()=>{class i{constructor(e,n,o,s){this.router=e,this.activatedRoute=n,this.snackbar=o,this.authApi=s,this.email="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.authApi.getUsersApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,h.w)(({id:n})=>e.authApi.getUsersApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["/usuarios"]);e.usuarioSeleccionado=n[0],e.email=e.usuarioSeleccionado.email})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.email="",this.router.navigate(["admin/usuarios/"])}deleteUsuarioApi(){this.authApi.deleteUserApi(this.usuarioSeleccionado.id,this.tokenApi).subscribe(e=>{this.snackbar.open("Usuario eliminado correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},e=>{this.snackbar.open("Ha ocurrido un error al eliminar el usuario","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/usuarios/"])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(b.ux),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete-usuario"]],decls:10,vars:1,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","100%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"\xbfEst\xe1s seguro de eliminar al usuario?"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return o.email=r}),t.qZA()()(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return o.deleteUsuarioApi()}),t._uU(7,"Aceptar"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return o.cancelar()}),t._uU(9,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.email))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]})}return i})();function ot(i,c){1&i&&(t.TgZ(0,"th",7),t._uU(1,"No hay sugerencias"),t.qZA())}function it(i,c){1&i&&(t.TgZ(0,"th",7),t._uU(1,"Sugerencias"),t.qZA())}function at(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t._uU(2),t.qZA(),t.TgZ(3,"td",8)(4,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToAddSugerencia(s.id))}),t.TgZ(5,"mat-icon"),t._uU(6,"done"),t.qZA()(),t.TgZ(7,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToDeleteSugerencia(s.id))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()()}if(2&i){const e=c.$implicit;t.xp6(2),t.hij(" ",e.nombre," ")}}let rt=(()=>{class i{constructor(e,n,o){this.router=e,this.establecimientosApi=n,this.authApi=o,this.listadoSugerencias=[],this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){try{e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.obtenerSugerencias()}catch(n){console.error("Error en ngOnInit:",n)}})()}ngOnDestroy(){this.sugerenciasSubscription.unsubscribe()}obtenerSugerencias(){var e=this;return(0,p.Z)(function*(){try{const n=yield e.establecimientosApi.getSugerenciasApi(e.tokenApi).toPromise();e.listadoSugerencias=n,e.sugerenciasSubscription=e.establecimientosApi.sugerencias$.subscribe(o=>{e.listadoSugerencias=o})}catch(n){console.error("Error al obtener zonas:",n)}})()}goToAddSugerencia(e){this.router.navigate(["admin/sugerencias/add",e])}goToDeleteSugerencia(e){this.router.navigate(["admin/sugerencias/delete",e])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-sugerencias"]],decls:13,vars:3,consts:[[2,"text-align","center","font-size","40px","font-family","monospace"],[2,"height","100%","width","100%"],[2,"height","50%","width","70%","margin","auto","margin-bottom","150px"],[2,"width","50%","margin","auto"],[2,"width","100%"],["class","th","colspan","2",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2",1,"th"],[1,"td"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Gesti\xf3n de Sugerencias"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"div",2),t._UZ(5,"router-outlet"),t.qZA(),t.TgZ(6,"table",3)(7,"thead")(8,"tr",4),t.YNc(9,ot,2,0,"th",5),t.YNc(10,it,2,0,"th",5),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,at,10,1,"tr",6),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("ngIf",0==o.listadoSugerencias.length),t.xp6(1),t.Q6J("ngIf",o.listadoSugerencias.length>0),t.xp6(2),t.Q6J("ngForOf",o.listadoSugerencias))},dependencies:[u.sg,u.O5,l.lC,f.RK,_.Hw],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:20px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-family:monospace;height:50px;color:#fff}"]})}return i})();function st(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.addSugerenciaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let ct=(()=>{class i{constructor(e,n,o,s,r){this.router=e,this.activatedRoute=n,this.snackbar=o,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.usuario="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getSugerenciasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,h.w)(({id:n})=>e.establecimientosApi.getSugerenciaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/sugerencias/"]);e.sugerenciaSeleccionada=n[0],e.nombre=e.sugerenciaSeleccionada.nombre,e.authApi.getUsersApiById(e.sugerenciaSeleccionada.id_usuario,e.tokenApi).subscribe(o=>{e.usuarioSeleccionado=o[0],e.usuario=e.usuarioSeleccionado.email})})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/sugerencias/"])}addSugerenciaApi(){this.router.navigate(["establecimientos","add"],{queryParams:{sugerenciaId:this.sugerenciaSeleccionada.id}})}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(b.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-add-sugerencia"]],decls:15,vars:4,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Email","aria-label","Nombre","aria-describedby","addon-wrapping","name","email","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[2,"margin","auto","width","40%","margin-top","20px","font-family","monospace"],["target","_blank","type","button",1,"btn","btn-outline-primary",2,"width","100%",3,"href"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"A\xf1adir Sugerencia"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return o.usuario=r}),t.qZA()()(),t.TgZ(5,"div",1)(6,"form",2)(7,"input",4),t.NdJ("ngModelChange",function(r){return o.nombre=r}),t.qZA()()(),t.TgZ(8,"div",5)(9,"a",6),t._uU(10,"Sitio web"),t.qZA()(),t.TgZ(11,"div",7),t.YNc(12,st,2,0,"button",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return o.cancelar()}),t._uU(14,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.usuario),t.xp6(3),t.Q6J("ngModel",o.nombre),t.xp6(2),t.s9C("href",o.sugerenciaSeleccionada.enlace,t.LSH),t.xp6(3),t.Q6J("ngIf",o.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return i})();function lt(i,c){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.deleteSugerenciaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let ut=(()=>{class i{constructor(e,n,o,s,r){this.router=e,this.activatedRoute=n,this.snackbar=o,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.usuario="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getSugerenciasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,h.w)(({id:n})=>e.establecimientosApi.getSugerenciaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/sugerencias/"]);e.sugerenciaSeleccionada=n[0],e.nombre=e.sugerenciaSeleccionada.nombre,e.authApi.getUsersApiById(e.sugerenciaSeleccionada.id_usuario,e.tokenApi).subscribe(o=>{e.usuarioSeleccionado=o[0],e.usuario=e.usuarioSeleccionado.email})})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/sugerencias/"])}deleteSugerenciaApi(){this.establecimientosApi.deleteSugerenciaApi(this.sugerenciaSeleccionada.id,this.tokenApi).subscribe(e=>{this.snackbar.open("Sugerencia eliminada correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},e=>{this.snackbar.open("Ha ocurrido un error al eliminar la sugerencia","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/sugerencias/"])}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(b.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete-sugerencia"]],decls:15,vars:4,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Email","aria-label","Nombre","aria-describedby","addon-wrapping","name","email","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[2,"margin","auto","width","40%","margin-top","20px","font-family","monospace"],["target","_blank","type","button",1,"btn","btn-outline-primary",2,"width","100%",3,"href"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"\xbfEst\xe1s seguro de eliminar la sugerencia?"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return o.usuario=r}),t.qZA()()(),t.TgZ(5,"div",1)(6,"form",2)(7,"input",4),t.NdJ("ngModelChange",function(r){return o.nombre=r}),t.qZA()()(),t.TgZ(8,"div",5)(9,"a",6),t._uU(10,"Sitio web"),t.qZA()(),t.TgZ(11,"div",7),t.YNc(12,lt,2,0,"button",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return o.cancelar()}),t._uU(14,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",o.usuario),t.xp6(3),t.Q6J("ngModel",o.nombre),t.xp6(2),t.s9C("href",o.sugerenciaSeleccionada.enlace,t.LSH),t.xp6(3),t.Q6J("ngIf",o.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return i})(),pt=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-info-sugerencia"]],decls:2,vars:0,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"No hay Sugerencias Seleccionadas"),t.qZA())}})}return i})();var dt=d(7398);function gt(i,c){if(1&i&&(t.TgZ(0,"td",11),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.listadoNombresUsuarios[e.id_usuario]||"Cargando..."," ")}}function mt(i,c){if(1&i&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&i){const e=t.oxw().$implicit,n=t.oxw();t.xp6(1),t.hij(" ",n.listadoNombresUsuarios[e.id_usuario]||"Cargando..."," ")}}function bt(i,c){if(1&i&&(t.TgZ(0,"tbody")(1,"tr"),t.YNc(2,gt,2,1,"td",8),t.YNc(3,mt,2,1,"td",9),t.TgZ(4,"td",10),t._uU(5),t.qZA()()()),2&i){const e=c.$implicit;t.xp6(2),t.Q6J("ngIf","Conectado"==e.estado),t.xp6(1),t.Q6J("ngIf","Desconectado"==e.estado),t.xp6(2),t.hij(" ",e.hora," ")}}const ht=[{path:"",component:k,children:[{path:"zonas",component:v,children:[{path:"",component:R},{path:"edit/:id",component:I},{path:"delete/:id",component:Q}]},{path:"categorias",component:M,children:[{path:"",component:P},{path:"edit/:id",component:X},{path:"delete/:id",component:j}]},{path:"usuarios",component:E,children:[{path:"",component:$},{path:"edit/:id",component:et},{path:"delete/:id",component:nt}]},{path:"sugerencias",component:rt,children:[{path:"",component:pt},{path:"add/:id",component:ct},{path:"delete/:id",component:ut}]},{path:"registro",component:(()=>{class i{constructor(e){this.authApi=e,this.listadoRegistros=[],this.listadoNombresUsuarios={},this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi");const n=yield e.authApi.getRegistroApi(e.tokenApi).toPromise();e.listadoRegistros=n,e.cargarNombresUsuarios()})()}cargarNombresUsuarios(){var e=this;return(0,p.Z)(function*(){try{for(const n of e.listadoRegistros){const o=yield e.obtenerNombreUser(n.id_usuario).toPromise();e.listadoNombresUsuarios[n.id_usuario]=o}}catch(n){console.error("Error al cargar nombres de usuarios:",n)}})()}obtenerNombreUser(e){return this.authApi.getUsersApiById(e,this.tokenApi).pipe((0,dt.U)(n=>n[0].email))}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-registro"]],decls:15,vars:1,consts:[[2,"text-align","center","font-size","40px","font-family","monospace","padding","30px"],[2,"height","100%","width","90%","margin","auto"],[2,"width","27%","margin","auto","text-align","center","margin-bottom","20px"],[2,"background-color","green","border-radius","20px","margin-bottom","10px"],[2,"background-color","red","border-radius","20px"],[2,"width","100%"],["colspan","3",1,"th"],[4,"ngFor","ngForOf"],["class","td","style","color: green;",4,"ngIf"],["class","td","style","color: red;",4,"ngIf"],[1,"td"],[1,"td",2,"color","green"],[1,"td",2,"color","red"]],template:function(n,o){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Registro de Actividad"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2)(4,"div",3),t._uU(5,"Conectado"),t.qZA(),t.TgZ(6,"div",4),t._uU(7,"Desconectado"),t.qZA()(),t.TgZ(8,"div")(9,"table",5)(10,"thead")(11,"tr",5)(12,"th",6),t._uU(13,"\xdaltimos 10 Registros"),t.qZA()()(),t.YNc(14,bt,6,3,"tbody",7),t.qZA()()()),2&n&&(t.xp6(14),t.Q6J("ngForOf",o.listadoRegistros))},dependencies:[u.sg,u.O5],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:15px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;font-size:15px;font-family:monospace;margin-right:10px;height:50px;color:#fff}"]})}return i})()},{path:"**",redirectTo:"zonas"}]}];let ft=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(ht),l.Bz]})}return i})();var _t=d(1423);let Ct=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[u.ez,ft,_t.q,a.u5,a.UX]})}return i})()}}]);