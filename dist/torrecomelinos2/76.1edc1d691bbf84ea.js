"use strict";(self.webpackChunkTorrecomelinos2=self.webpackChunkTorrecomelinos2||[]).push([[76],{8076:(_t,C,d)=>{d.r(C),d.d(C,{ZonaAdminModule:()=>ft});var u=d(6814),l=d(1896),t=d(5879),f=d(2296);function Z(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToUrl(s.url))}),t._uU(1),t.qZA()}if(2&o){const e=c.$implicit;t.xp6(1),t.Oqu(e.label)}}let k=(()=>{class o{ngOnInit(){this.nombrePublico=sessionStorage.getItem("nombreCompleto")}constructor(e){this.router=e,this.nombrePublico="",this.AdminItems=[{label:"Gesti\xf3n de Zonas",icon:"playlist_add",url:"admin/zonas"},{label:"Gesti\xf3n de Categor\xedas",icon:"playlist_add",url:"admin/categorias"},{label:"Gesti\xf3n de Usuarios",icon:"playlist_add",url:"admin/usuarios"},{label:"Gesti\xf3n de Sugerencias",icon:"playlist_add",url:"admin/sugerencias"},{label:"Registro de Actividad",icon:"playlist_add",url:"admin/registro"}]}goToApp(){this.router.navigate(["/establecimientos"])}goToUrl(e){this.router.navigate([e])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-layout-admin"]],decls:15,vars:2,consts:[[2,"background-color","white","width","100%","height","3%","font-family","monospace","color","black"],[2,"text-align","center"],[2,"height","40%"],[2,"background-color","white","width","50%","height","20%px","margin","auto","margin-top","50px","border-radius","30px"],[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px","color","black"],[2,"width","70%","height","45px","margin","auto","margin-top","10%"],["mat-raised-button","",2,"width","100%","font-family","monospace","border-radius","5px",3,"click"],[2,"width","50%","height","40%","margin","auto","margin-bottom","80px"],[1,"d-grid","gap-2"],["class","btn btn-primary","type","button","style","font-family: monospace;",3,"click",4,"ngFor","ngForOf"],[2,"width","100%","height","100%"],["type","button",1,"btn","btn-primary",2,"font-family","monospace",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2,"Pablo Rico Mach\xedo"),t.qZA()(),t.TgZ(3,"div",2)(4,"div",3)(5,"h1",4),t._uU(6),t.qZA(),t.TgZ(7,"div",5)(8,"button",6),t.NdJ("click",function(){return i.goToApp()}),t._uU(9,"Volver a la aplicaci\xf3n"),t.qZA()()()(),t.TgZ(10,"div",7)(11,"div",8),t.YNc(12,Z,2,1,"button",9),t.qZA()(),t.TgZ(13,"div",10),t._UZ(14,"router-outlet"),t.qZA()),2&n&&(t.xp6(6),t.hij("Bienvenido a la zona de Administrador, ",i.nombrePublico,""),t.xp6(6),t.Q6J("ngForOf",i.AdminItems))},dependencies:[u.sg,l.lC,f.lW]})}return o})();var p=d(5861),m=d(2185),g=d(2539),_=d(617);function y(o,c){1&o&&(t.TgZ(0,"th",7),t._uU(1,"Zonas"),t.qZA())}function x(o,c){1&o&&(t.TgZ(0,"th",7),t._uU(1,"No hay zonas"),t.qZA())}function T(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t._uU(2),t.qZA(),t.TgZ(3,"td",8)(4,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToEditZona(s.id))}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA()(),t.TgZ(7,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToDeleteZona(s.id))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()()}if(2&o){const e=c.$implicit,n=t.oxw();t.xp6(2),t.hij(" ",n.capitalizarPalabra(e.nombre)," ")}}let v=(()=>{class o{constructor(e,n,i){this.router=e,this.establecimientosApi=n,this.authApi=i,this.tokenApi="",this.listadoZonas=[]}ngOnInit(){var e=this;return(0,p.Z)(function*(){try{e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.obtenerZonas()}catch(n){console.error("Error en ngOnInit:",n)}})()}ngOnDestroy(){this.zonasSubscription&&this.zonasSubscription.unsubscribe()}obtenerZonas(){var e=this;return(0,p.Z)(function*(){try{const n=yield e.establecimientosApi.getZonasApi(e.tokenApi).toPromise();e.listadoZonas=n,e.zonasSubscription=e.establecimientosApi.zonas$.subscribe(i=>{e.listadoZonas=i})}catch(n){console.error("Error al obtener zonas:",n)}})()}goToEditZona(e){this.router.navigate(["admin/zonas/edit",e])}goToDeleteZona(e){this.router.navigate(["admin/zonas/delete",e])}capitalizarPalabra(e){return e.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-zonas"]],decls:13,vars:3,consts:[[2,"text-align","center","font-size","40px","font-family","monospace"],[2,"height","100%","width","100%"],[2,"height","50%","width","50%","margin","auto","margin-bottom","150px"],[2,"width","50%","margin","auto"],[2,"width","100%"],["class","th","colspan","2",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2",1,"th"],[1,"td"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Gesti\xf3n de Zonas"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"div",2),t._UZ(5,"router-outlet"),t.qZA(),t.TgZ(6,"table",3)(7,"thead")(8,"tr",4),t.YNc(9,y,2,0,"th",5),t.YNc(10,x,2,0,"th",5),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,T,10,1,"tr",6),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("ngIf",i.listadoZonas.length>0),t.xp6(1),t.Q6J("ngIf",0==i.listadoZonas.length),t.xp6(2),t.Q6J("ngForOf",i.listadoZonas))},dependencies:[u.sg,u.O5,l.lC,f.RK,_.Hw],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:20px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-family:monospace;height:50px;color:#fff}"]})}return o})();function U(o,c){1&o&&(t.TgZ(0,"th",7),t._uU(1,"Categor\xedas"),t.qZA())}function w(o,c){1&o&&(t.TgZ(0,"th",7),t._uU(1,"No hay categor\xedas"),t.qZA())}function J(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t._uU(2),t.qZA(),t.TgZ(3,"td",8)(4,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToEditZona(s.id))}),t.TgZ(5,"mat-icon"),t._uU(6,"edit"),t.qZA()(),t.TgZ(7,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToDeleteZona(s.id))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()()}if(2&o){const e=c.$implicit,n=t.oxw();t.xp6(2),t.hij(" ",n.capitalizarPalabra(e.nombre)," ")}}let M=(()=>{class o{constructor(e,n,i){this.router=e,this.establecimientosApi=n,this.authApi=i,this.listadoCategorias=[],this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){try{e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.obtenerCategorias()}catch(n){console.error("Error en ngOnInit:",n)}})()}ngOnDestroy(){this.categoriasSubscription&&this.categoriasSubscription.unsubscribe()}obtenerCategorias(){var e=this;return(0,p.Z)(function*(){try{const n=yield e.establecimientosApi.getCategoriasApi(e.tokenApi).toPromise();e.listadoCategorias=n,e.categoriasSubscription=e.establecimientosApi.categorias$.subscribe(i=>{e.listadoCategorias=i})}catch(n){console.error("Error al obtener zonas:",n)}})()}goToEditZona(e){this.router.navigate(["admin/categorias/edit",e])}goToDeleteZona(e){this.router.navigate(["admin/categorias/delete",e])}capitalizarPalabra(e){return e.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-categorias"]],decls:13,vars:3,consts:[[2,"text-align","center","font-size","40px","font-family","monospace"],[2,"height","100%","width","100%"],[2,"height","50%","width","50%","margin","auto","margin-bottom","150px"],[2,"width","50%","margin","auto"],[2,"width","100%"],["class","th","colspan","2",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2",1,"th"],[1,"td"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Gesti\xf3n de Categor\xedas"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"div",2),t._UZ(5,"router-outlet"),t.qZA(),t.TgZ(6,"table",3)(7,"thead")(8,"tr",4),t.YNc(9,U,2,0,"th",5),t.YNc(10,w,2,0,"th",5),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,J,10,1,"tr",6),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("ngIf",i.listadoCategorias.length>0),t.xp6(1),t.Q6J("ngIf",0==i.listadoCategorias.length),t.xp6(2),t.Q6J("ngForOf",i.listadoCategorias))},dependencies:[u.sg,u.O5,l.lC,f.RK,_.Hw],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:20px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-family:monospace;height:50px;color:#fff}"]})}return o})();function S(o,c){1&o&&(t.TgZ(0,"th",7),t._uU(1,"Usuarios"),t.qZA())}function N(o,c){1&o&&(t.TgZ(0,"th",7),t._uU(1,"No hay usuarios"),t.qZA())}function q(o,c){1&o&&(t.TgZ(0,"td",8),t._uU(1," Administrador "),t.qZA())}function F(o,c){1&o&&(t.TgZ(0,"td",8),t._uU(1," Usuario "),t.qZA())}function z(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t._uU(2),t.qZA(),t.YNc(3,q,2,0,"td",9),t.YNc(4,F,2,0,"td",9),t.TgZ(5,"td",8)(6,"button",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToEditZona(s.id.toString()))}),t.TgZ(7,"mat-icon"),t._uU(8,"edit"),t.qZA()(),t.TgZ(9,"button",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToDeleteZona(s.id.toString()))}),t.TgZ(10,"mat-icon"),t._uU(11,"delete"),t.qZA()()()()}if(2&o){const e=c.$implicit;t.xp6(2),t.hij(" ",e.email," "),t.xp6(1),t.Q6J("ngIf",1===e.idRol),t.xp6(1),t.Q6J("ngIf",2===e.idRol)}}let E=(()=>{class o{constructor(e,n){this.router=e,this.authApi=n,this.listadoUsuarios=[],this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){try{e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.obtenerUsuarios()}catch(n){console.error("Error en ngOnInit:",n)}})()}ngOnDestroy(){this.usuariosSubscription.unsubscribe()}obtenerUsuarios(){var e=this;return(0,p.Z)(function*(){try{const n=yield e.authApi.getUsersApi(e.tokenApi).toPromise();e.listadoUsuarios=n,e.usuariosSubscription=e.authApi.usuarios$.subscribe(i=>{e.listadoUsuarios=i})}catch(n){console.error("Error al obtener zonas:",n)}})()}goToEditZona(e){this.router.navigate(["admin/usuarios/edit",e])}goToDeleteZona(e){this.router.navigate(["admin/usuarios/delete",e])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-usuarios"]],decls:13,vars:3,consts:[[2,"text-align","center","font-size","40px","font-family","monospace"],[2,"height","100%","width","100%"],[2,"height","50%","width","50%","margin","auto","margin-bottom","150px"],[2,"width","50%","margin","auto"],[2,"width","100%"],["class","th","colspan","4",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","4",1,"th"],[1,"td"],["class","td",4,"ngIf"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Gesti\xf3n de Usuarios"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"div",2),t._UZ(5,"router-outlet"),t.qZA(),t.TgZ(6,"table",3)(7,"thead")(8,"tr",4),t.YNc(9,S,2,0,"th",5),t.YNc(10,N,2,0,"th",5),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,z,12,3,"tr",6),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("ngIf",i.listadoUsuarios.length>0),t.xp6(1),t.Q6J("ngIf",0==i.listadoUsuarios.length),t.xp6(2),t.Q6J("ngForOf",i.listadoUsuarios))},dependencies:[u.sg,u.O5,l.lC,f.RK,_.Hw],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:20px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;margin-right:30px;font-size:20px;font-family:monospace;height:50px;color:#fff}"]})}return o})();var b=d(4664),h=d(2939),a=d(6223);function Y(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.editZonaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let I=(()=>{class o{constructor(e,n,i,s,r){this.router=e,this.activatedRoute=n,this.snackbar=i,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.tokenApi="",this.editingInProgress=!1}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getZonasApi(e.tokenApi).toPromise(),e.zonaSeleccionada||e.activatedRoute.params.pipe((0,b.w)(({id:n})=>e.establecimientosApi.getZonaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/zona/"]);e.zonaSeleccionada=n[0],e.nombre=e.zonaSeleccionada.nombre})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/zona/"])}editZonaApi(){0!==this.nombre.length?this.establecimientosApi.getZonaByNameApi(this.nombre,this.tokenApi).subscribe(e=>{if(null!=e[0])return this.snackbar.open("Esta zona ya existe.","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",void this.router.navigate(["admin/zonas/"]);this.establecimientosApi.updateZonaApi({id:this.zonaSeleccionada.id,nombre:this.nombre},this.tokenApi).subscribe(s=>{this.snackbar.open("Zona actualizada correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},s=>{this.snackbar.open("Ha ocurrido un error al actualizar la zona","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/zonas/"])}):this.snackbar.open("Es obligatorio rellenar el nombre de la zona","Cerrar",{duration:2e3,panelClass:["background"]})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(h.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-zona"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Editar Zona"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,Y,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",i.nombre),t.xp6(2),t.Q6J("ngIf",i.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return o})();function O(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteZona())}),t._uU(1,"Aceptar"),t.qZA()}}let Q=(()=>{class o{constructor(e,n,i,s,r){this.router=e,this.activatedRoute=n,this.snackbar=i,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getZonasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,b.w)(({id:n})=>e.establecimientosApi.getZonaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/zonas"]);e.zonaSeleccionada=n[0],e.nombre=e.zonaSeleccionada.nombre})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/zonas/"])}deleteZona(){this.establecimientosApi.deleteZonaApi(this.zonaSeleccionada.id,this.tokenApi).subscribe(e=>{this.snackbar.open("Zona eliminada correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{this.nombre=""})},e=>{this.snackbar.open("Ha ocurrido un error al eliminar la zona","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{this.nombre=""})}),this.router.navigate(["admin/zonas/"])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(h.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-delete-zona"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"\xbfEst\xe1s seguro de eliminar la zona?"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,O,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",i.nombre),t.xp6(2),t.Q6J("ngIf",i.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]})}return o})();function D(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addZonaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let R=(()=>{class o{constructor(e,n,i){this.snackbar=e,this.establecimientosApi=n,this.authApi=i,this.nombre="",this.numZonas=0,this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi")})()}cancelar(){this.nombre="",this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]})}addZonaApi(){this.establecimientosApi.getZonaByNameApi(this.nombre,this.tokenApi).subscribe(e=>{if(null!=e[0])return this.snackbar.open("Esta zona ya existe.","Cerrar",{duration:2e3,panelClass:["background"]}),void(this.nombre="");this.establecimientosApi.addZonaApi({id:0,nombre:this.nombre},this.tokenApi).subscribe(s=>{this.snackbar.open("Zona a\xf1adida correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{}),this.nombre=""})})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(h.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-zona"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"A\xf1adir Zona"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,D,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",i.nombre),t.xp6(2),t.Q6J("ngIf",i.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return o})();function H(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addCategoriaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let P=(()=>{class o{constructor(e,n,i){this.snackbar=e,this.establecimientosApi=n,this.authApi=i,this.nombre="",this.numCategorias=0,this.tokenApi=""}ngOnInit(){this.tokenApi=sessionStorage.getItem("tokenApi")}cancelar(){this.nombre="",this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]})}addCategoriaApi(){this.establecimientosApi.getCategoriaByNameApi(this.nombre,this.tokenApi).subscribe(e=>{if(null!=e[0])return this.snackbar.open("Esta categoria ya existe.","Cerrar",{duration:2e3,panelClass:["background"]}),void(this.nombre="");this.establecimientosApi.addCategoriaApi({id:0,nombre:this.nombre},this.tokenApi).subscribe(s=>{this.snackbar.open("Categoria a\xf1adida correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.nombre=""})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(h.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-categoria"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"A\xf1adir Categor\xeda"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,H,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",i.nombre),t.xp6(2),t.Q6J("ngIf",i.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return o})();function G(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.editCategoria())}),t._uU(1,"Aceptar"),t.qZA()}}let X=(()=>{class o{constructor(e,n,i,s,r){this.router=e,this.activatedRoute=n,this.snackbar=i,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getCategoriasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,b.w)(({id:n})=>e.establecimientosApi.getCategoriaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/categorias/"]);e.categoriaSeleccionada=n[0],e.nombre=e.categoriaSeleccionada.nombre})})()}capitalizarPalabra(e){return e.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/categorias/"])}editCategoria(){const e=this.capitalizarPalabra(this.nombre);0!==this.nombre.length?this.establecimientosApi.getCategoriaByNameApi(e,this.tokenApi).subscribe(n=>{if(null!=n[0])return this.snackbar.open("Esta categoria ya existe.","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",void this.router.navigate(["admin/categorias/"]);this.establecimientosApi.updateCategoriaApi({id:this.categoriaSeleccionada.id,nombre:this.nombre},this.tokenApi).subscribe(r=>{this.snackbar.open("Categoria actualizada correctamente.","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},r=>{this.snackbar.open("Ha ocurrido un error al actualizar la categoria.","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/categorias/"])}):this.snackbar.open("Es obligatorio rellenar el nombre de la categoria","Cerrar",{duration:2e3,panelClass:["background"]})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(h.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-categoria"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Editar Categor\xeda"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,G,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",i.nombre),t.xp6(2),t.Q6J("ngIf",i.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return o})();function K(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",7),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteCategoriaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let B=(()=>{class o{constructor(e,n,i,s,r){this.router=e,this.activatedRoute=n,this.snackbar=i,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getCategoriasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,b.w)(({id:n})=>e.establecimientosApi.getCategoriaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/categorias/"]);e.categoriaSeleccionada=n[0],e.nombre=e.categoriaSeleccionada.nombre})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/categorias/"])}deleteCategoriaApi(){this.establecimientosApi.deleteCategoriaApi(this.categoriaSeleccionada.id,this.tokenApi).subscribe(e=>{this.snackbar.open("Categoria eliminada correctamente.","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},e=>{this.snackbar.open("Ha ocurrido un error al eliminar la categor\xeda.","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/categorias/"])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(h.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-delete-categoria"]],decls:9,vars:2,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"\xbfEst\xe1s seguro de eliminar la categor\xeda?"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.nombre=r}),t.qZA()()(),t.TgZ(5,"div",4),t.YNc(6,K,2,0,"button",5),t.TgZ(7,"button",6),t.NdJ("click",function(){return i.cancelar()}),t._uU(8,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",i.nombre),t.xp6(2),t.Q6J("ngIf",i.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]})}return o})();var A=d(7874);function j(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.registrarApi())}),t._uU(1,"Aceptar"),t.qZA()}}let L=(()=>{class o{constructor(e,n,i){this.snackbar=e,this.authApi=n,this.router=i,this.nombreCompleto="",this.email="",this.pass="",this.idRol=0,this.tokenApi=""}ngOnInit(){this.tokenApi=sessionStorage.getItem("tokenApi")}calcularHashMD5(e){return A.MD5(e).toString()}cancelar(){this.email="",this.nombreCompleto="",this.pass="",this.idRol=0,this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]})}verificaCampos(){return!(""===this.email||""===this.pass||""===this.nombreCompleto||0===this.idRol)}registrarApi(){this.email.includes("@gmail.com")||this.email.includes("@hotmail.com")?this.nombreCompleto.length<5?this.snackbar.open("El nombre debe tener un m\xednimo de 5 caracteres","Cerrar",{duration:2e3,panelClass:["background"]}):this.pass.length<8?this.snackbar.open("La contrase\xf1a debe tener un m\xednimo de 8 caracteres","Cerrar",{duration:2e3,panelClass:["background"]}):this.authApi.getUserByEmail(this.email).subscribe(e=>{if(null==e[0]){const i={id:0,email:this.email,passwd:this.calcularHashMD5(this.pass),nombreCompleto:this.nombreCompleto,idRol:this.idRol,token:"",verificado:1};this.authApi.addUserApi(i,this.tokenApi).subscribe(s=>{this.snackbar.open("Usuario a\xf1adido correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{}),this.email="",this.pass="",this.nombreCompleto="",this.idRol=0}),this.router.navigate(["admin/usuarios/"])}else this.snackbar.open("El usuario registrado ya existe","Cerrar",{duration:2e3,panelClass:["background"]})}):this.snackbar.open("No has introducido un correo electr\xf3nico v\xe1lido","Cerrar",{duration:2e3,panelClass:["background"]})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(h.ux),t.Y36(g.Q),t.Y36(l.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-usuario"]],decls:21,vars:5,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto"],["type","email","placeholder","Email*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","margin-top","30px"],["type","text","placeholder","Nombre*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","password","placeholder","Contrase\xf1a*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"width","100%","margin","auto","margin-top","20px"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["id","caterogia","name","idRol",1,"form-control",3,"ngModel","ngModelChange"],["value","0","selected",""],["value","1"],["value","2"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"A\xf1adir Usuario"),t.qZA(),t.TgZ(2,"div",1)(3,"input",2),t.NdJ("ngModelChange",function(r){return i.email=r}),t.qZA()(),t.TgZ(4,"div",3)(5,"input",4),t.NdJ("ngModelChange",function(r){return i.nombreCompleto=r}),t.qZA()(),t.TgZ(6,"div",3)(7,"input",5),t.NdJ("ngModelChange",function(r){return i.pass=r}),t.qZA()(),t.TgZ(8,"div",6)(9,"form",7)(10,"select",8),t.NdJ("ngModelChange",function(r){return i.idRol=r}),t.TgZ(11,"option",9),t._uU(12,"Selecciona un Rol"),t.qZA(),t.TgZ(13,"option",10),t._uU(14,"Administrador"),t.qZA(),t.TgZ(15,"option",11),t._uU(16,"Usuario"),t.qZA()()()(),t.TgZ(17,"div",12),t.YNc(18,j,2,0,"button",13),t.TgZ(19,"button",14),t.NdJ("click",function(){return i.cancelar()}),t._uU(20,"Cancelar"),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("ngModel",i.email),t.xp6(2),t.Q6J("ngModel",i.nombreCompleto),t.xp6(2),t.Q6J("ngModel",i.pass),t.xp6(3),t.Q6J("ngModel",i.idRol),t.xp6(8),t.Q6J("ngIf",1==i.verificaCampos()))},dependencies:[u.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F]})}return o})();function $(o,c){if(1&o&&(t.TgZ(0,"option",16),t._uU(1),t.qZA()),2&o){const e=c.$implicit;t.s9C("value",e.id),t.xp6(1),t.Oqu(e.rol)}}function W(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.verificar())}),t._uU(1,"No Verificado"),t.qZA()}}function V(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.noVerificar())}),t._uU(1,"Verificado"),t.qZA()}}function tt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.editUsuarioApi())}),t._uU(1,"Aceptar"),t.qZA()}}let et=(()=>{class o{constructor(e,n,i,s){this.router=e,this.snackbar=n,this.activatedRoute=i,this.authApi=s,this.nombreCompleto="",this.email="",this.pass="",this.idRol=0,this.verificado=0,this.tokenApi="",this.listadoRoles=[]}calcularHashMD5(e){return A.MD5(e).toString()}cancelar(){this.router.navigate(["admin/usuarios"])}verificaCampos(){return!(""===this.email||""===this.pass||""===this.nombreCompleto||0===this.idRol)}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.authApi.getUsersApi(e.tokenApi).toPromise();const n=yield e.authApi.getRoles().toPromise();e.listadoRoles=n,e.activatedRoute.params.pipe((0,b.w)(({id:i})=>e.authApi.getUsersApiById(i,e.tokenApi))).subscribe(i=>{if(!i)return e.router.navigate(["/usuarios"]);e.usuarioSeleccionado=i[0],e.email=e.usuarioSeleccionado.email,e.nombreCompleto=e.usuarioSeleccionado.nombreCompleto,e.pass=e.usuarioSeleccionado.passwd,e.idRol=e.usuarioSeleccionado.idRol,e.verificado=e.usuarioSeleccionado.verificado})})()}verificar(){this.verificado=1}noVerificar(){this.verificado=0}editUsuarioApi(){var e=this;return(0,p.Z)(function*(){if(e.nombreCompleto.length<5)return void e.snackbar.open("El nombre debe tener un m\xednimo de 5 caracteres","Cerrar",{duration:2e3,panelClass:["background"]});if(e.pass.length<8)return void e.snackbar.open("La contrase\xf1a debe tener un m\xednimo de 8 caracteres","Cerrar",{duration:2e3,panelClass:["background"]});let i=(yield e.authApi.getUserByEmail(e.email).toPromise())[0];i=e.usuarioSeleccionado.passwd===e.pass?{id:e.usuarioSeleccionado.id,email:e.email,nombreCompleto:e.nombreCompleto,passwd:e.usuarioSeleccionado.passwd,token:e.usuarioSeleccionado.token,idRol:e.idRol,verificado:e.verificado}:{id:e.usuarioSeleccionado.id,email:e.email,idRol:e.idRol,nombreCompleto:e.nombreCompleto,passwd:e.calcularHashMD5(e.pass),token:e.usuarioSeleccionado.token,verificado:e.verificado},e.authApi.updateUserApi(i,e.tokenApi).subscribe(s=>{e.snackbar.open("Usuario actualizado correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},s=>{e.snackbar.open("Ha ocurrido un error al actualizar el usuario","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),e.router.navigate(["admin/usuarios/"])})()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(h.ux),t.Y36(l.gz),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-edit-usuario"]],decls:19,vars:8,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto"],["type","email","placeholder","Email*","aria-label","Username","aria-describedby","addon-wrapping","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","margin-top","30px"],["type","text","placeholder","Nombre*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","password","placeholder","Contrase\xf1a*","aria-label","Username","aria-describedby","addon-wrapping","required","",1,"form-control",3,"ngModel","ngModelChange"],[2,"width","100%","margin","auto","margin-top","20px"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["id","id","name","idRol",1,"form-control",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[2,"font-family","monospace","width","50%","margin","auto","margin-top","30px"],["type","button","class","btn btn-outline-danger",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-success",3,"click",4,"ngIf"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],[3,"value"],["type","button",1,"btn","btn-outline-danger",3,"click"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Editar Usuario"),t.qZA(),t.TgZ(2,"div",1)(3,"input",2),t.NdJ("ngModelChange",function(r){return i.email=r}),t.qZA()(),t.TgZ(4,"div",3)(5,"input",4),t.NdJ("ngModelChange",function(r){return i.nombreCompleto=r}),t.qZA()(),t.TgZ(6,"div",3)(7,"input",5),t.NdJ("ngModelChange",function(r){return i.pass=r}),t.qZA()(),t.TgZ(8,"div",6)(9,"form",7)(10,"select",8),t.NdJ("ngModelChange",function(r){return i.idRol=r}),t.YNc(11,$,2,2,"option",9),t.qZA()()(),t.TgZ(12,"div",10),t.YNc(13,W,2,0,"button",11),t.YNc(14,V,2,0,"button",12),t.qZA(),t.TgZ(15,"div",13),t.YNc(16,tt,2,0,"button",14),t.TgZ(17,"button",15),t.NdJ("click",function(){return i.cancelar()}),t._uU(18,"Cancelar"),t.qZA()()),2&n&&(t.xp6(3),t.Q6J("ngModel",i.email),t.xp6(2),t.Q6J("ngModel",i.nombreCompleto),t.xp6(2),t.Q6J("ngModel",i.pass),t.xp6(3),t.Q6J("ngModel",i.idRol),t.xp6(1),t.Q6J("ngForOf",i.listadoRoles),t.xp6(2),t.Q6J("ngIf",0===i.verificado),t.xp6(1),t.Q6J("ngIf",1===i.verificado),t.xp6(2),t.Q6J("ngIf",1==i.verificaCampos()))},dependencies:[u.sg,u.O5,a._Y,a.YN,a.Kr,a.Fj,a.EJ,a.JJ,a.JL,a.Q7,a.On,a.F]})}return o})(),nt=(()=>{class o{constructor(e,n,i,s){this.router=e,this.activatedRoute=n,this.snackbar=i,this.authApi=s,this.email="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.authApi.getUsersApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,b.w)(({id:n})=>e.authApi.getUsersApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["/usuarios"]);e.usuarioSeleccionado=n[0],e.email=e.usuarioSeleccionado.email})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.email="",this.router.navigate(["admin/usuarios/"])}deleteUsuarioApi(){this.authApi.deleteUserApi(this.usuarioSeleccionado.id,this.tokenApi).subscribe(e=>{this.snackbar.open("Usuario eliminado correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},e=>{this.snackbar.open("Ha ocurrido un error al eliminar el usuario","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/usuarios/"])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(h.ux),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-delete-usuario"]],decls:10,vars:1,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","100%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","disabled","",1,"form-control",3,"ngModel","ngModelChange"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"\xbfEst\xe1s seguro de eliminar al usuario?"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.email=r}),t.qZA()()(),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return i.deleteUsuarioApi()}),t._uU(7,"Aceptar"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return i.cancelar()}),t._uU(9,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",i.email))},dependencies:[a._Y,a.Fj,a.JJ,a.JL,a.On,a.F]})}return o})();function it(o,c){1&o&&(t.TgZ(0,"th",7),t._uU(1,"No hay sugerencias"),t.qZA())}function ot(o,c){1&o&&(t.TgZ(0,"th",7),t._uU(1,"Sugerencias"),t.qZA())}function at(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",8),t._uU(2),t.qZA(),t.TgZ(3,"td",8)(4,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToAddSugerencia(s.id))}),t.TgZ(5,"mat-icon"),t._uU(6,"done"),t.qZA()(),t.TgZ(7,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.goToDeleteSugerencia(s.id))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()()()()}if(2&o){const e=c.$implicit;t.xp6(2),t.hij(" ",e.nombre," ")}}let rt=(()=>{class o{constructor(e,n,i){this.router=e,this.establecimientosApi=n,this.authApi=i,this.listadoSugerencias=[],this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){try{e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.obtenerSugerencias()}catch(n){console.error("Error en ngOnInit:",n)}})()}ngOnDestroy(){this.sugerenciasSubscription.unsubscribe()}obtenerSugerencias(){var e=this;return(0,p.Z)(function*(){try{const n=yield e.establecimientosApi.getSugerenciasApi(e.tokenApi).toPromise();e.listadoSugerencias=n,e.sugerenciasSubscription=e.establecimientosApi.sugerencias$.subscribe(i=>{e.listadoSugerencias=i})}catch(n){console.error("Error al obtener zonas:",n)}})()}goToAddSugerencia(e){this.router.navigate(["admin/sugerencias/add",e])}goToDeleteSugerencia(e){this.router.navigate(["admin/sugerencias/delete",e])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-sugerencias"]],decls:13,vars:3,consts:[[2,"text-align","center","font-size","40px","font-family","monospace"],[2,"height","100%","width","100%"],[2,"height","50%","width","70%","margin","auto","margin-bottom","150px"],[2,"width","50%","margin","auto"],[2,"width","100%"],["class","th","colspan","2",4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","2",1,"th"],[1,"td"],["mat-icon-button","","aria-label","Example icon button with a vertical three dot icon",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Gesti\xf3n de Sugerencias"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"div",2),t._UZ(5,"router-outlet"),t.qZA(),t.TgZ(6,"table",3)(7,"thead")(8,"tr",4),t.YNc(9,it,2,0,"th",5),t.YNc(10,ot,2,0,"th",5),t.qZA()(),t.TgZ(11,"tbody"),t.YNc(12,at,10,1,"tr",6),t.qZA()()()()),2&n&&(t.xp6(9),t.Q6J("ngIf",0==i.listadoSugerencias.length),t.xp6(1),t.Q6J("ngIf",i.listadoSugerencias.length>0),t.xp6(2),t.Q6J("ngForOf",i.listadoSugerencias))},dependencies:[u.sg,u.O5,l.lC,f.RK,_.Hw],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:20px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;font-size:20px;font-family:monospace;height:50px;color:#fff}"]})}return o})();function st(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addSugerenciaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let ct=(()=>{class o{constructor(e,n,i,s,r){this.router=e,this.activatedRoute=n,this.snackbar=i,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.usuario="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getSugerenciasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,b.w)(({id:n})=>e.establecimientosApi.getSugerenciaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/sugerencias/"]);e.sugerenciaSeleccionada=n[0],e.nombre=e.sugerenciaSeleccionada.nombre,e.authApi.getUsersApiById(e.sugerenciaSeleccionada.id_usuario,e.tokenApi).subscribe(i=>{e.usuarioSeleccionado=i[0],e.usuario=e.usuarioSeleccionado.email})})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/sugerencias/"])}addSugerenciaApi(){this.router.navigate(["establecimientos","add"],{queryParams:{sugerenciaId:this.sugerenciaSeleccionada.id}})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(h.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-sugerencia"]],decls:15,vars:4,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Email","aria-label","Nombre","aria-describedby","addon-wrapping","name","email","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[2,"margin","auto","width","40%","margin-top","20px","font-family","monospace"],["target","_blank","type","button",1,"btn","btn-outline-primary",2,"width","100%",3,"href"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"A\xf1adir Sugerencia"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.usuario=r}),t.qZA()()(),t.TgZ(5,"div",1)(6,"form",2)(7,"input",4),t.NdJ("ngModelChange",function(r){return i.nombre=r}),t.qZA()()(),t.TgZ(8,"div",5)(9,"a",6),t._uU(10,"Sitio web"),t.qZA()(),t.TgZ(11,"div",7),t.YNc(12,st,2,0,"button",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return i.cancelar()}),t._uU(14,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",i.usuario),t.xp6(3),t.Q6J("ngModel",i.nombre),t.xp6(2),t.s9C("href",i.sugerenciaSeleccionada.enlace,t.LSH),t.xp6(3),t.Q6J("ngIf",i.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return o})();function lt(o,c){if(1&o){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.deleteSugerenciaApi())}),t._uU(1,"Aceptar"),t.qZA()}}let ut=(()=>{class o{constructor(e,n,i,s,r){this.router=e,this.activatedRoute=n,this.snackbar=i,this.establecimientosApi=s,this.authApi=r,this.nombre="",this.usuario="",this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi"),yield e.establecimientosApi.getSugerenciasApi(e.tokenApi).toPromise(),e.activatedRoute.params.pipe((0,b.w)(({id:n})=>e.establecimientosApi.getSugerenciaApiById(n,e.tokenApi))).subscribe(n=>{if(!n)return e.router.navigate(["admin/sugerencias/"]);e.sugerenciaSeleccionada=n[0],e.nombre=e.sugerenciaSeleccionada.nombre,e.authApi.getUsersApiById(e.sugerenciaSeleccionada.id_usuario,e.tokenApi).subscribe(i=>{e.usuarioSeleccionado=i[0],e.usuario=e.usuarioSeleccionado.email})})})()}cancelar(){this.snackbar.open("Operaci\xf3n cancelada","Cerrar",{duration:2e3,panelClass:["background"]}),this.nombre="",this.router.navigate(["admin/sugerencias/"])}deleteSugerenciaApi(){this.establecimientosApi.deleteSugerenciaApi(this.sugerenciaSeleccionada.id,this.tokenApi).subscribe(e=>{this.snackbar.open("Sugerencia eliminada correctamente","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})},e=>{this.snackbar.open("Ha ocurrido un error al eliminar la sugerencia","Cerrar",{duration:2e3,panelClass:["background"]}).afterDismissed().subscribe(()=>{})}),this.router.navigate(["admin/sugerencias/"])}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.F0),t.Y36(l.gz),t.Y36(h.ux),t.Y36(m.X),t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-delete-sugerencia"]],decls:15,vars:4,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"],[2,"width","70%","margin","auto"],[1,"input-group","flex-nowrap",2,"width","100%","margin","auto","padding","10px"],["type","text","placeholder","Email","aria-label","Nombre","aria-describedby","addon-wrapping","name","email","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],["type","text","placeholder","Nombre","aria-label","Nombre","aria-describedby","addon-wrapping","name","nombre","required","","readonly","",1,"form-control",3,"ngModel","ngModelChange"],[2,"margin","auto","width","40%","margin-top","20px","font-family","monospace"],["target","_blank","type","button",1,"btn","btn-outline-primary",2,"width","100%",3,"href"],[2,"font-family","monospace","width","100%","margin-top","30px"],["type","button","class","btn btn-outline-success","style","float: left;",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",2,"float","right",3,"click"],["type","button",1,"btn","btn-outline-success",2,"float","left",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"\xbfEst\xe1s seguro de eliminar la sugerencia?"),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return i.usuario=r}),t.qZA()()(),t.TgZ(5,"div",1)(6,"form",2)(7,"input",4),t.NdJ("ngModelChange",function(r){return i.nombre=r}),t.qZA()()(),t.TgZ(8,"div",5)(9,"a",6),t._uU(10,"Sitio web"),t.qZA()(),t.TgZ(11,"div",7),t.YNc(12,lt,2,0,"button",8),t.TgZ(13,"button",9),t.NdJ("click",function(){return i.cancelar()}),t._uU(14,"Cancelar"),t.qZA()()),2&n&&(t.xp6(4),t.Q6J("ngModel",i.usuario),t.xp6(3),t.Q6J("ngModel",i.nombre),t.xp6(2),t.s9C("href",i.sugerenciaSeleccionada.enlace,t.LSH),t.xp6(3),t.Q6J("ngIf",i.nombre.length>0))},dependencies:[u.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.On,a.F]})}return o})(),pt=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-info-sugerencia"]],decls:2,vars:0,consts:[[2,"text-align","center","font-size","20px","font-family","monospace","padding","30px"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"No hay Sugerencias Seleccionadas"),t.qZA())}})}return o})();var dt=d(7398);function gt(o,c){if(1&o&&(t.TgZ(0,"tbody")(1,"tr")(2,"td",5),t._uU(3),t.qZA(),t.TgZ(4,"td",5),t._uU(5),t.qZA(),t.TgZ(6,"td",5),t._uU(7),t.qZA()()()),2&o){const e=c.$implicit,n=t.oxw();t.xp6(3),t.hij(" ",n.listadoNombresUsuarios[e.id_usuario]||"Cargando..."," "),t.xp6(2),t.hij(" ",e.estado," "),t.xp6(2),t.hij(" ",e.hora," ")}}const mt=[{path:"",component:k,children:[{path:"zonas",component:v,children:[{path:"",component:R},{path:"edit/:id",component:I},{path:"delete/:id",component:Q}]},{path:"categorias",component:M,children:[{path:"",component:P},{path:"edit/:id",component:X},{path:"delete/:id",component:B}]},{path:"usuarios",component:E,children:[{path:"",component:L},{path:"edit/:id",component:et},{path:"delete/:id",component:nt}]},{path:"sugerencias",component:rt,children:[{path:"",component:pt},{path:"add/:id",component:ct},{path:"delete/:id",component:ut}]},{path:"registro",component:(()=>{class o{constructor(e){this.authApi=e,this.listadoRegistros=[],this.listadoNombresUsuarios={},this.tokenApi=""}ngOnInit(){var e=this;return(0,p.Z)(function*(){e.tokenApi=sessionStorage.getItem("tokenApi");const n=yield e.authApi.getRegistroApi(e.tokenApi).toPromise();e.listadoRegistros=n,e.cargarNombresUsuarios()})()}cargarNombresUsuarios(){var e=this;return(0,p.Z)(function*(){try{for(const n of e.listadoRegistros){const i=yield e.obtenerNombreUser(n.id_usuario).toPromise();e.listadoNombresUsuarios[n.id_usuario]=i}}catch(n){console.error("Error al cargar nombres de usuarios:",n)}})()}obtenerNombreUser(e){return this.authApi.getUsersApiById(e,this.tokenApi).pipe((0,dt.U)(n=>n[0].email))}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(g.Q))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-registro"]],decls:10,vars:1,consts:[[2,"text-align","center","font-size","40px","font-family","monospace","padding","30px"],[2,"height","100%","width","90%","margin","auto"],[2,"width","100%"],["colspan","3",1,"th"],[4,"ngFor","ngForOf"],[1,"td"]],template:function(n,i){1&n&&(t.TgZ(0,"h1",0),t._uU(1,"Registro de Actividad"),t.qZA(),t.TgZ(2,"div",1)(3,"div")(4,"table",2)(5,"thead")(6,"tr",2)(7,"th",3),t._uU(8,"\xdaltimos 10 Registros"),t.qZA()()(),t.YNc(9,gt,8,3,"tbody",4),t.qZA()()()),2&n&&(t.xp6(9),t.Q6J("ngForOf",i.listadoRegistros))},dependencies:[u.sg],styles:[".th[_ngcontent-%COMP%]{background-color:#fff;color:#000;text-align:center;height:50px;font-size:15px;font-family:monospace}.td[_ngcontent-%COMP%]{text-align:center;font-size:15px;font-family:monospace;margin-right:10px;height:50px;color:#fff}"]})}return o})()},{path:"**",redirectTo:"zonas"}]}];let ht=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(mt),l.Bz]})}return o})();var bt=d(1423);let ft=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#n=this.\u0275inj=t.cJS({imports:[u.ez,ht,bt.q,a.u5,a.UX]})}return o})()}}]);